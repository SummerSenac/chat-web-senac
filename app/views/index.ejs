<!DOCTYPE HTML>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="google-signin-scope" content="profile email">
    <meta name="google-signin-client_id" content="1073052617224-05tnssgr7picqgqu4kld7v0ggng4k1dk.apps.googleusercontent.com">
    <script src="https://apis.google.com/js/platform.js" async defer></script>
    <title>Multiroom Chat</title>

    <!-- bootstrap - link cdn -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css"
        integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">

    <!-- estilo -->
    <link href="css/style.css" rel="stylesheet">
</head>

<body class="body">

    <div class="container">
        <div class="row vertical-offset-80">
            <div class="col-md-4 col-md-offset-4">
                <div class="panel panel-default">
                    <div class="panel-heading">
                        <div class="row-fluid user-row">
                            <img src="images/multiroom_chat_2.png" class="img-responsive" alt="Multiroom Chat" />
                        </div>
                    </div>
                    <div class="panel-body">
                        <form accept-charset="UTF-8" role="form" class="form-signin" action="/chat" method="post">
                            <fieldset>
                                <label class="panel-login">
                                    <div class="login_result"></div>
                                </label>
                                <input class="form-control" placeholder="Nome ou apelido" id="apelido" name="apelido"
                                    type="text">
                                <br></br>
                                <input class="btn btn-lg btn-success btn-block" type="submit" id="entrar"
                                    value="Entrar »">
                            </fieldset>
                        </form>
                    </div>
                    <div class="g-signin2" data-onsuccess="onSignIn" data-theme="dark"></div>
                    <a href="#" onclick="signOut();">Desconectar</a>
                </div>

                <div>
                    <% if(validacao.errors.length> 0) {%>
                        <div class="row">
                            <div class="col-md-12">
                                <div class="alert alert-danger">
                                    <strong>Atenção!</strong>
                                    <ul>
                                        <% for(var i=0; i < validacao.errors.length; i++) { %>
                                            <li>
                                                <%=validacao.errors[i].msg%>
                                            </li>
                                            <% } %>
                                    </ul>
                                </div>
                            </div>
                        </div>
                        <% } %>
                </div>
            </div>
        </div>
    </div>
    <script>
      function onSignIn(googleUser) {
        // Useful data for your client-side scripts:
        var profile = googleUser.getBasicProfile();
        console.log("ID: " + profile.getId()); // Don't send this directly to your server!
        console.log('Full Name: ' + profile.getName());
        console.log('Given Name: ' + profile.getGivenName());
        console.log('Family Name: ' + profile.getFamilyName());
        console.log("Image URL: " + profile.getImageUrl());
        console.log("Email: " + profile.getEmail());

        // The ID token you need to pass to your backend:
        var id_token = googleUser.getAuthResponse().id_token;
        console.log("ID Token: " + id_token);
      }
    </script>
    <script>
      function signOut() {
        var auth2 = gapi.auth2.getAuthInstance();
        auth2.signOut().then(function () {
          console.log('User signed out.');
        });
      }
    </script>
    </body>

</html>